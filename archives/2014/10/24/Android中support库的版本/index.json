{"summary":"<p>随着Android 5.0 SDK正式版的发布，Android里的support library也有了较大更新，在<a href=\"https://developer.android.com/tools/support-library/features.html\" target=\"_blank\" rel=\"noopener\">官方文档</a>中v4、v7等库的依赖标识如下（其中版本号为21.0的为更新或新添加）：</p>\n<a id=\"more\"></a>\n<p><a href=\"https://developer.android.com/tools/support-library/features.html#v4\" target=\"_blank\" rel=\"noopener\">v4 Support Library</a><br>com.android.support:support-v4:<strong>21.0.+\n</strong><a href=\"https://developer.android.com/tools/support-library/features.html#v7\" target=\"_blank\" rel=\"noopener\">v7 Support Library</a><strong>\n</strong>com.android.support:appcompat-v7:<strong>21.0.+</strong><br>com.android.support:cardview-v7:<strong>21.0.+</strong><br>com.android.support:gridlayout-v7:<strong>21.0.+</strong><br>com.android.support:mediarouter-v7:<strong>21.0.+</strong><br>com.android.support:palette-v7:<strong>21.0.+</strong><br>com.android.support:recyclerview-v7:<strong>21.0.+</strong><br><a href=\"https://developer.android.com/tools/support-library/features.html#v8\" target=\"_blank\" rel=\"noopener\">v8 Support Library</a><br><a href=\"https://developer.android.com/tools/support-library/features.html#v13\" target=\"_blank\" rel=\"noopener\">v13 Support Library</a><br>com.android.support:support-v13:18.0.+<br><a href=\"https://developer.android.com/tools/support-library/features.html#v17-leanback\" target=\"_blank\" rel=\"noopener\">v17 Support Library</a><br>com.android.support:leanback-v17:<strong>21.0.+</strong></p>\n<p>这些库所支持的版本详见SDK一下目录内容%ANDROID_SDK_HOME%\\extras\\android\\m2repository\\com\\android\\support</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">├───appcompat-v7</span><br><span class=\"line\">│ ├───18.0.0</span><br><span class=\"line\">│ ├───19.0.0</span><br><span class=\"line\">│ ├───19.0.1</span><br><span class=\"line\">│ ├───19.1.0</span><br><span class=\"line\">│ ├───20.0.0</span><br><span class=\"line\">│ └───21.0.0-rc1</span><br><span class=\"line\">├───cardview-v7</span><br><span class=\"line\">│ └───21.0.0-rc1</span><br><span class=\"line\">├───gridlayout-v7</span><br><span class=\"line\">│ ├───13.0.0</span><br><span class=\"line\">│ ├───18.0.0</span><br><span class=\"line\">│ ├───19.0.0</span><br><span class=\"line\">│ ├───19.0.1</span><br><span class=\"line\">│ ├───19.1.0</span><br><span class=\"line\">│ ├───20.0.0</span><br><span class=\"line\">│ └───21.0.0-rc1</span><br><span class=\"line\">├───leanback-v17</span><br><span class=\"line\">│ └───21.0.0-rc1</span><br><span class=\"line\">├───mediarouter-v7</span><br><span class=\"line\">│ ├───18.0.0</span><br><span class=\"line\">│ ├───19.0.0</span><br><span class=\"line\">│ ├───19.0.1</span><br><span class=\"line\">│ ├───19.1.0</span><br><span class=\"line\">│ ├───20.0.0</span><br><span class=\"line\">│ └───21.0.0-rc1</span><br><span class=\"line\">├───palette-v7</span><br><span class=\"line\">│ └───21.0.0-rc1</span><br><span class=\"line\">├───recyclerview-v7</span><br><span class=\"line\">│ └───21.0.0-rc1</span><br><span class=\"line\">├───support-annotations</span><br><span class=\"line\">│ ├───19.1.0</span><br><span class=\"line\">│ ├───20.0.0</span><br><span class=\"line\">│ └───21.0.0-rc1</span><br><span class=\"line\">├───support-v13</span><br><span class=\"line\">│ ├───13.0.0</span><br><span class=\"line\">│ ├───18.0.0</span><br><span class=\"line\">│ ├───19.0.0</span><br><span class=\"line\">│ ├───19.0.1</span><br><span class=\"line\">│ ├───19.1.0</span><br><span class=\"line\">│ ├───20.0.0</span><br><span class=\"line\">│ └───21.0.0-rc1</span><br><span class=\"line\">└───support-v4</span><br><span class=\"line\"> ├───13.0.0</span><br><span class=\"line\"> ├───18.0.0</span><br><span class=\"line\"> ├───19.0.0</span><br><span class=\"line\"> ├───19.0.1</span><br><span class=\"line\"> ├───19.1.0</span><br><span class=\"line\"> ├───20.0.0</span><br><span class=\"line\"> └───21.0.0-rc1</span><br></pre></td></tr></table></figure>\n<p>今天在使用com.android.support:support-v4:<strong>21.0.+</strong>时遇到一个问题</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Execution failed for task ':app:processDebugManifest'.</span><br><span class=\"line\"><span class=\"meta\">&gt;</span> Manifest merger failed : uses-sdk:minSdkVersion 14 cannot be smaller than version L declared in library com.android.support:appcompat-v7:21.0.0-rc1</span><br></pre></td></tr></table></figure>\n<p>此错误的含义是指appcompat-v7:21.0.0-rc1这个库要求minSdkVersion为L，这似乎不合常理，因为support库本身就是为了在低版本下支持后来高版本才出现的一些特性，查看appcompat-v7:21.0.0-rc1这个库中定义的minSdkVersion（在%ANDROID_SDK_HOME%\\extras\\android\\m2repository\\com\\android\\support\\appcompat-v7\\21.0.0-rc1\\appcompat-v7-21.0.0-rc1.aar 这个zip文件中AndroidManifest.xml有android:minSdkVersion=”L”<br>），顺便看一下上一个版本appcompat-v7-20.0.0.aar的android:minSdkVersion=”7”为预期正常的，再联想到这个版本号是rc版本，还不是正式版，所以可能这是一个小bug，应该在正式版中就会解决了。</p>\n<p><del>但目前所有使用更新过的21.0版本（实际是21.0.0-rc1，见以上高亮显示的版本号）的support库都会存在这个问题，即一旦引用了如com.android.support:support-v4:<strong>21.0.+</strong>都会要求应用的android:minSdkVersion至少为”L”，这显然是有问题的，目前临时的解决方法有以下几种</del></p>\n<p><del>1.在AndroidManifest.xml中manifest标签中添加xmlns:tools=”<a href=\"http://schemas.android.com/tools&quot;，然后再添加或修改\" target=\"_blank\" rel=\"noopener\">http://schemas.android.com/tools&quot;，然后再添加或修改</a><uses-sdk tools:node=\"replace\"></uses-sdk></del></p>\n<p><del>2.暂时不用最新的21.0版本，使用之前的一个版本，如com.android.support:appcompat-v7:<strong>20.0.+</strong>，这种方式会有一个警告如下图所示</del><br><del> <a href=\"/resources/2014/10/support_appcompat_20_warning.png\"><img src=\"/resources/2014/10/support_appcompat_20_warning.png\" alt=\"support_appcompat_20_warning\"></a></del></p>\n<p><del>3.删除如%ANDROID_SDK_HOME%\\extras\\android\\m2repository\\com\\android\\support\\appcompat-v7\\maven-metadata.xml中的<version>21.0.0-rc1</version></del></p>\n<p><span style=\"color: #cc99ff;\"><em><strong>目前Android Support Repository已更新至reversion 7解决此问题，21.0.0-rc1已更新为21.0.0</strong></em></span></p>\n<p>这里备注一下版本号中”+”的含义</p>\n<ol>\n<li>com.android.support:support-v4:+ 不带版本号直接使用+表示最新版本，目前匹配21.0.0</li>\n<li>com.android.support:support-v4:19.+ 表示19.x.y…这类版本，目前匹配19.1.0</li>\n<li><strong>com.android.support:support-v4:19+ 与19.+含义一样，目前匹配19.1.0 (不常用，一般只用VersionNumber.+形式)</strong></li>\n<li>com.android.support:support-v4:19.0.+ 表示19.0.y…这类版本，目前匹配19.0.1</li>\n<li>com.android.support:support-v4:19.0 表示直接匹配19.0.1<br>不建议使用1方式，使用2、3方式的好处就是如果后面有bug修复版本可以自动升级使用最新的修复版本</li>\n</ol>\n<p>还可以参考一下文档<br><a href=\"http://stackoverflow.com/questions/24438170/manifest-merger-failed-uses-sdkminsdkversion-14#answer-24452251\" target=\"_blank\" rel=\"noopener\">manifest-merger-failed-uses-sdkminsdkversion-14</a><br><a href=\"http://www.myandroidsolutions.com/2014/08/11/add-cardview-to-android-os-versions-below-l/\" target=\"_blank\" rel=\"noopener\">add-cardview-to-android-os-versions-below-l</a></p>\n"}