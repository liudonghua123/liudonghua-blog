{"summary":"<p>[toc]</p>\n<h6 id=\"这里记录一些maven和gradle中可能会经常用到的东西…\"><a href=\"#这里记录一些maven和gradle中可能会经常用到的东西…\" class=\"headerlink\" title=\"**这里记录一些maven和gradle中可能会经常用到的东西…\"></a>**这里记录一些maven和gradle中可能会经常用到的东西…</h6><p>Maven下载依赖项源码和javadoc**</p>\n<a id=\"more\"></a>\n<p>Maven中定义的依赖库默认是不下载源码和javadoc的，如果需要下载源码或者javadoc，可以使用以下几种方式</p>\n<ol>\n<li>可以在命令行上参数方式<br>同时下载源码和javadoc</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn depdency:resolve -DdownloadSources -DdownloadJavadocs</span><br></pre></td></tr></table></figure>\n<p>只下载源码</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn dependency:sources</span><br></pre></td></tr></table></figure>\n<p>只下载javadoc</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn dependency:resolve -Dclassifier=javadoc</span><br></pre></td></tr></table></figure>\n<ol>\n<li>在项目pom.xml文件中添加如下配置</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;build&gt;</span><br><span class=\"line\">    &lt;plugins&gt;</span><br><span class=\"line\">        &lt;plugin&gt;</span><br><span class=\"line\">            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;maven-eclipse-plugin&lt;/artifactId&gt;</span><br><span class=\"line\">            &lt;configuration&gt;</span><br><span class=\"line\">                &lt;downloadSources&gt;true&lt;/downloadSources&gt;</span><br><span class=\"line\">                &lt;downloadJavadocs&gt;true&lt;/downloadJavadocs&gt;</span><br><span class=\"line\">            &lt;/configuration&gt;</span><br><span class=\"line\">        &lt;/plugin&gt;</span><br><span class=\"line\">    &lt;/plugins&gt;</span><br><span class=\"line\">&lt;/build&gt;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>在更高层次全局设置(~/.m2/settings.xml).</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;profiles&gt;</span><br><span class=\"line\">    &lt;profile&gt;</span><br><span class=\"line\">        &lt;id&gt;downloadSources&lt;/id&gt;</span><br><span class=\"line\">        &lt;properties&gt;</span><br><span class=\"line\">            &lt;downloadSources&gt;true&lt;/downloadSources&gt;</span><br><span class=\"line\">            &lt;downloadJavadocs&gt;true&lt;/downloadJavadocs&gt;</span><br><span class=\"line\">        &lt;/properties&gt;</span><br><span class=\"line\">    &lt;/profile&gt;</span><br><span class=\"line\">&lt;/profiles&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;activeProfiles&gt;</span><br><span class=\"line\">    &lt;activeProfile&gt;downloadSources&lt;/activeProfile&gt;</span><br><span class=\"line\">&lt;/activeProfiles&gt;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>在Eclipse的maven插件设置中设置，如下图所示<br><a href=\"/resources/2014/10/eclipse_maven_settings.png\"><img src=\"/resources/2014/10/eclipse_maven_settings-293x300.png\" alt=\"eclipse_maven_settings\"></a></li>\n</ol>\n<h6 id=\"Maven创建web工程\"><a href=\"#Maven创建web工程\" class=\"headerlink\" title=\"Maven创建web工程\"></a><strong>Maven创建web工程</strong></h6><p>使用如下命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn archetype:generate -DgroupId=&#123;project-packaging&#125; -DartifactId=&#123;project-name&#125; -DarchetypeArtifactId=maven-archetype-webapp -DinteractiveMode=false</span><br></pre></td></tr></table></figure>\n<p>进一步使用以下命令可以生成eclipse java web工程项目，并且下载依赖项，然后就可以在eclipse中导入已存在的普通eclipse项目。<br>或者也可以不执行以下命令，直接在eclipse中导入maven项目。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn eclipse:eclipse -Dwtpversion=2.0</span><br></pre></td></tr></table></figure>\n<p>mvn eclipse:eclipse 把maven项目转换成eclipse项目，”-Dwtpversion=2.0”是指定转换成eclipse web项目。</p>\n<h6 id=\"Gradle中使用provided-scope的depedency\"><a href=\"#Gradle中使用provided-scope的depedency\" class=\"headerlink\" title=\"Gradle中使用provided scope的depedency\"></a><strong>Gradle中使用provided scope的depedency</strong></h6><p>目前官方暂时不支持，见<a href=\"https://issues.gradle.org/browse/GRADLE-784\" target=\"_blank\" rel=\"noopener\">Provide a ‘provided’ configuration</a>，不过可以通过以下方式，在gradle中添加</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apply plugin: 'eclipse'  // Eclipse users only</span><br><span class=\"line\"></span><br><span class=\"line\">configurations &#123;</span><br><span class=\"line\">    provided</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">sourceSets &#123;</span><br><span class=\"line\">    main.compileClasspath += configurations.provided</span><br><span class=\"line\">    test.compileClasspath += configurations.provided</span><br><span class=\"line\">    test.runtimeClasspath += configurations.provided</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">eclipse.classpath.plusConfigurations += configurations.provided  // Eclipse users only</span><br></pre></td></tr></table></figure>\n<p>第一行和最后一行仅针对eclipse适用</p>\n<h6 id=\"Gradle下载依赖项源码和javadoc\"><a href=\"#Gradle下载依赖项源码和javadoc\" class=\"headerlink\" title=\"Gradle下载依赖项源码和javadoc\"></a><strong>Gradle下载依赖项源码和javadoc</strong></h6><p>eclipse中通过eclipse插件下载</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apply plugin: 'java'</span><br><span class=\"line\">apply plugin: 'eclipse'</span><br><span class=\"line\"></span><br><span class=\"line\">eclipse &#123;</span><br><span class=\"line\">    classpath &#123;</span><br><span class=\"line\">       downloadSources=true</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>intellij中通过idea插件下载</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apply plugin: 'groovy'</span><br><span class=\"line\">apply plugin: 'idea'</span><br><span class=\"line\"></span><br><span class=\"line\">repositories &#123;</span><br><span class=\"line\">    mavenCentral()</span><br><span class=\"line\">    mavenRepo name: \"Grails\", url: \"http://repo.grails.org/grails/repo/\"</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">dependencies &#123;</span><br><span class=\"line\">    groovy 'org.codehaus.groovy:groovy-all:2.0.4'</span><br><span class=\"line\">    compile 'org.slf4j:slf4j-log4j12:1.6.6', 'postgresql:postgresql:9.1-901.jdbc4', 'net.sourceforge.nekohtml:nekohtml:1.9.16'</span><br><span class=\"line\">    ['core', 'hibernate', 'plugin-datasource', 'plugin-domain-class'].each &#123; plugin -&gt;</span><br><span class=\"line\">        compile \"org.grails:grails-$plugin:2.1.0\"</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">idea &#123;</span><br><span class=\"line\">    module &#123;</span><br><span class=\"line\">        downloadJavadoc = true</span><br><span class=\"line\">        downloadSources = true</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// Fat Jar Option (http://docs.codehaus.org/display/GRADLE/Cookbook#Cookbook-Creatingafatjar)</span><br><span class=\"line\">jar &#123;</span><br><span class=\"line\">    from &#123; configurations.compile.collect &#123; it.isDirectory() ? it : zipTree(it) &#125; &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">task wrapper(type: Wrapper) &#123;</span><br><span class=\"line\">    gradleVersion = '1.0'</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a><strong>参考资料</strong></h6><p><a href=\"http://stackoverflow.com/questions/5780758/maven-always-download-sources-and-javadocs\" target=\"_blank\" rel=\"noopener\">maven-always-download-sources-and-javadocs</a><br><a href=\"http://stackoverflow.com/questions/310720/get-source-jar-files-attached-to-eclipse-for-maven-managed-dependencies\" target=\"_blank\" rel=\"noopener\">get-source-jar-files-attached-to-eclipse-for-maven-managed-dependencies</a><br><a href=\"http://www.mkyong.com/maven/how-to-create-a-web-application-project-with-maven/\" target=\"_blank\" rel=\"noopener\">how-to-create-a-web-application-project-with-maven</a><br><a href=\"http://stackoverflow.com/questions/18738888/how-to-use-provided-scope-for-jar-file-in-gradle-build\" target=\"_blank\" rel=\"noopener\">how-to-use-provided-scope-for-jar-file-in-gradle-build</a><br><a href=\"http://www.sinking.in/blog/provided-scope-in-gradle/\" target=\"_blank\" rel=\"noopener\">provided-scope-in-gradle</a><br><a href=\"http://blog.codeaholics.org/2012/emulating-mavens-provided-scope-in-gradle/\" target=\"_blank\" rel=\"noopener\">emulating-mavens-provided-scope-in-gradle</a><br><a href=\"http://stackoverflow.com/questions/12718753/how-to-download-dependency-sources-for-gradle-project-in-idea\" target=\"_blank\" rel=\"noopener\">how-to-download-dependency-sources-for-gradle-project-in-idea</a></p>\n"}