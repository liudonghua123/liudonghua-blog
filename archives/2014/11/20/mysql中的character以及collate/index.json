{"summary":"<p>mysql中的character指字符编码，collate用于排序，每种character对应多个collate，通过”show collation;”查看支持的character和collate</p>\n<a id=\"more\"></a>\n<p>[toc]</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">mysql&gt;</span><span class=\"bash\"> show collation;</span></span><br><span class=\"line\">+--------------------------+----------+-----+---------+----------+---------+</span><br><span class=\"line\">| Collation | Charset | Id | Default | Compiled | Sortlen |</span><br><span class=\"line\">+--------------------------+----------+-----+---------+----------+---------+</span><br><span class=\"line\">......</span><br><span class=\"line\">| utf8_general_ci | utf8 | 33 | Yes | Yes | 1 |</span><br><span class=\"line\">| utf8_bin | utf8 | 83 | | Yes | 1 |</span><br><span class=\"line\">| utf8_unicode_ci | utf8 | 192 | | Yes | 8 |</span><br><span class=\"line\">| utf8_icelandic_ci | utf8 | 193 | | Yes | 8 |</span><br><span class=\"line\">......</span><br><span class=\"line\">+--------------------------+----------+-----+---------+----------+---------+</span><br><span class=\"line\">219 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n<p>character、collate有四个级别上，分别是全局、数据库、表、字段，后面的级别继承前面的设置</p>\n<blockquote>\n<ul>\n<li><a href=\"http://dev.mysql.com/doc/refman/5.0/en/charset-database.html\" target=\"_blank\" rel=\"noopener\">If both <code>CHARACTER SET _&lt;code&gt;X</code><em> and `COLLATE </em><code>Y<code>_&lt;/code&gt; are specified, character set _</code>X<code>_ and collation _</code>Y`_ are used.</code></a></li>\n<li><a href=\"http://dev.mysql.com/doc/refman/5.0/en/charset-database.html\" target=\"_blank\" rel=\"noopener\">If <code>CHARACTER SET _&lt;code&gt;X</code><em> is specified without <code>COLLATE</code>, character set </em><code>X</code>_ and its default collation are used. To see the default collation for each character set, use the <code>SHOW COLLATION</code> statement.</a></li>\n<li><a href=\"http://dev.mysql.com/doc/refman/5.0/en/charset-database.html\" target=\"_blank\" rel=\"noopener\">If <code>COLLATE _&lt;code&gt;Y</code><em> is specified without <code>CHARACTER SET</code>, the character set associated with </em><code>Y</code><em> and collation </em><code>Y</code>_ are used.</a></li>\n<li><a href=\"http://dev.mysql.com/doc/refman/5.0/en/charset-database.html\" target=\"_blank\" rel=\"noopener\">Otherwise, the server character set and server collation are used.</a><br>下面分别展开这四个级别的查看和修改方法</li>\n</ul>\n</blockquote>\n<h3 id=\"全局\"><a href=\"#全局\" class=\"headerlink\" title=\"全局\"></a>全局</h3><h4 id=\"查看方式\"><a href=\"#查看方式\" class=\"headerlink\" title=\"查看方式\"></a>查看方式</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">mysql&gt;</span><span class=\"bash\"> show variables like <span class=\"string\">'%character%'</span>;</span></span><br><span class=\"line\">+--------------------------+----------------------------------------------+</span><br><span class=\"line\">| Variable_name            | Value                                        |</span><br><span class=\"line\">+--------------------------+----------------------------------------------+</span><br><span class=\"line\">| character_set_client     | utf8                                         |</span><br><span class=\"line\">| character_set_connection | utf8                                         |</span><br><span class=\"line\">| character_set_database   | latin1                                       |</span><br><span class=\"line\">| character_set_filesystem | binary                                       |</span><br><span class=\"line\">| character_set_results    | utf8                                         |</span><br><span class=\"line\">| character_set_server     | latin1                                       |</span><br><span class=\"line\">| character_set_system     | utf8                                         |</span><br><span class=\"line\">| character_sets_dir       | /alidata/server/mysql-5.6.15/share/charsets/ |</span><br><span class=\"line\">+--------------------------+----------------------------------------------+</span><br><span class=\"line\">8 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">mysql&gt;</span><span class=\"bash\"> show variables like <span class=\"string\">\"%collat%\"</span>;</span></span><br><span class=\"line\">+----------------------+-----------------+</span><br><span class=\"line\">| Variable_name        | Value           |</span><br><span class=\"line\">+----------------------+-----------------+</span><br><span class=\"line\">| collation_connection | utf8_general_ci |</span><br><span class=\"line\">| collation_database   | utf8_general_ci |</span><br><span class=\"line\">| collation_server     | utf8_general_ci |</span><br><span class=\"line\">+----------------------+-----------------+</span><br><span class=\"line\">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n<h4 id=\"修改方式\"><a href=\"#修改方式\" class=\"headerlink\" title=\"修改方式\"></a>修改方式</h4><h1 id=\"修改my-cnf\"><a href=\"#修改my-cnf\" class=\"headerlink\" title=\"修改my.cnf\"></a>修改my.cnf</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> <span class=\"built_in\">set</span> default charset and collation</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> http://dev.mysql.com/doc/refman/5.6/en/charset-applications.html</span></span><br><span class=\"line\">character-set-server=utf8</span><br><span class=\"line\">collation-server=utf8_general_ci</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">mysql&gt;</span><span class=\"bash\"> show variables like <span class=\"string\">'%character%'</span>;</span></span><br><span class=\"line\">+--------------------------+----------------------------------------------+</span><br><span class=\"line\">| Variable_name            | Value                                        |</span><br><span class=\"line\">+--------------------------+----------------------------------------------+</span><br><span class=\"line\">| character_set_client     | utf8                                         |</span><br><span class=\"line\">| character_set_connection | utf8                                         |</span><br><span class=\"line\">| character_set_database   | utf8                                         |</span><br><span class=\"line\">| character_set_filesystem | binary                                       |</span><br><span class=\"line\">| character_set_results    | utf8                                         |</span><br><span class=\"line\">| character_set_server     | utf8                                         |</span><br><span class=\"line\">| character_set_system     | utf8                                         |</span><br><span class=\"line\">| character_sets_dir       | /alidata/server/mysql-5.6.15/share/charsets/ |</span><br><span class=\"line\">+--------------------------+----------------------------------------------+</span><br><span class=\"line\">8 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>\n<h3 id=\"数据库\"><a href=\"#数据库\" class=\"headerlink\" title=\"数据库\"></a>数据库</h3><h4 id=\"查看方式-1\"><a href=\"#查看方式-1\" class=\"headerlink\" title=\"查看方式\"></a>查看方式</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">mysql&gt;</span><span class=\"bash\"> select * from information_schema.schemata;</span></span><br><span class=\"line\">+--------------+--------------------+----------------------------+------------------------+----------+</span><br><span class=\"line\">| CATALOG_NAME | SCHEMA_NAME        | DEFAULT_CHARACTER_SET_NAME | DEFAULT_COLLATION_NAME | SQL_PATH |</span><br><span class=\"line\">+--------------+--------------------+----------------------------+------------------------+----------+</span><br><span class=\"line\">| def          | information_schema | utf8                       | utf8_general_ci        | NULL     |</span><br><span class=\"line\">| def          | dedecms            | latin1                     | latin1_swedish_ci      | NULL     |</span><br><span class=\"line\">| def          | mysql              | utf8                       | utf8_general_ci        | NULL     |</span><br><span class=\"line\">| def          | performance_schema | utf8                       | utf8_general_ci        | NULL     |</span><br><span class=\"line\">| def          | phpwind            | gbk                        | gbk_chinese_ci         | NULL     |</span><br><span class=\"line\">| def          | quickstart         | latin1                     | latin1_swedish_ci      | NULL     |</span><br><span class=\"line\">| def          | simpleweb          | latin1                     | latin1_swedish_ci      | NULL     |</span><br><span class=\"line\">| def          | test               | latin1                     | latin1_swedish_ci      | NULL     |</span><br><span class=\"line\">| def          | wordpress          | latin1                     | latin1_swedish_ci      | NULL     |</span><br><span class=\"line\">+--------------+--------------------+----------------------------+------------------------+----------+</span><br><span class=\"line\">9 rows in set (0.09 sec)</span><br></pre></td></tr></table></figure>\n<h4 id=\"修改方式-1\"><a href=\"#修改方式-1\" class=\"headerlink\" title=\"修改方式\"></a>修改方式</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">mysql&gt;</span><span class=\"bash\"> alter database simpleweb default character <span class=\"built_in\">set</span> utf8 default collate utf8_general_ci;</span></span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">mysql&gt;</span><span class=\"bash\"> create database my_tmp default character <span class=\"built_in\">set</span> utf8 default collate utf8_general_ci;</span></span><br><span class=\"line\">Query OK, 1 row affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">mysql&gt;</span><span class=\"bash\"> select * from information_schema.schemata;</span></span><br><span class=\"line\">+--------------+--------------------+----------------------------+------------------------+----------+</span><br><span class=\"line\">| CATALOG_NAME | SCHEMA_NAME        | DEFAULT_CHARACTER_SET_NAME | DEFAULT_COLLATION_NAME | SQL_PATH |</span><br><span class=\"line\">+--------------+--------------------+----------------------------+------------------------+----------+</span><br><span class=\"line\">| def          | information_schema | utf8                       | utf8_general_ci        | NULL     |</span><br><span class=\"line\">| def          | dedecms            | latin1                     | latin1_swedish_ci      | NULL     |</span><br><span class=\"line\">| def          | my_tmp             | utf8                       | utf8_general_ci        | NULL     |</span><br><span class=\"line\">| def          | mysql              | utf8                       | utf8_general_ci        | NULL     |</span><br><span class=\"line\">| def          | performance_schema | utf8                       | utf8_general_ci        | NULL     |</span><br><span class=\"line\">| def          | phpwind            | gbk                        | gbk_chinese_ci         | NULL     |</span><br><span class=\"line\">| def          | quickstart         | latin1                     | latin1_swedish_ci      | NULL     |</span><br><span class=\"line\">| def          | simpleweb          | utf8                       | utf8_general_ci        | NULL     |</span><br><span class=\"line\">| def          | test               | latin1                     | latin1_swedish_ci      | NULL     |</span><br><span class=\"line\">| def          | wordpress          | latin1                     | latin1_swedish_ci      | NULL     |</span><br><span class=\"line\">+--------------+--------------------+----------------------------+------------------------+----------+</span><br><span class=\"line\">10 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n<h3 id=\"表\"><a href=\"#表\" class=\"headerlink\" title=\"表\"></a>表</h3><h4 id=\"查看方式-2\"><a href=\"#查看方式-2\" class=\"headerlink\" title=\"查看方式\"></a>查看方式</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">mysql&gt;</span><span class=\"bash\"> select ccsa.character_set_name, ccsa.collation_name from information_schema.`tables` t,</span></span><br><span class=\"line\">    -&gt;        information_schema.`collation_character_set_applicability` ccsa</span><br><span class=\"line\">    -&gt; where ccsa.collation_name = t.table_collation</span><br><span class=\"line\">    -&gt;   and t.table_schema = \"simpleweb\"</span><br><span class=\"line\">    -&gt;   and t.table_name = \"users\";</span><br><span class=\"line\">+--------------------+-------------------+</span><br><span class=\"line\">| character_set_name | collation_name    |</span><br><span class=\"line\">+--------------------+-------------------+</span><br><span class=\"line\">| latin1             | latin1_swedish_ci |</span><br><span class=\"line\">+--------------------+-------------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n<h4 id=\"修改方式-2\"><a href=\"#修改方式-2\" class=\"headerlink\" title=\"修改方式\"></a>修改方式</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">mysql&gt;</span><span class=\"bash\"> alter table users default character <span class=\"built_in\">set</span> utf8 default collate utf8_general_ci;</span></span><br><span class=\"line\">Query OK, 0 rows affected (0.03 sec)</span><br><span class=\"line\">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">mysql&gt;</span><span class=\"bash\"> select ccsa.character_set_name, ccsa.collation_name from information_schema.`tables` t,  information_schema.`collation_character_set_applicability` ccsa <span class=\"built_in\">where</span> ccsa.collation_name = t.table_collation   and t.table_schema = <span class=\"string\">\"simpleweb\"</span>   and t.table_name = <span class=\"string\">\"users\"</span>;</span></span><br><span class=\"line\">+--------------------+-----------------+</span><br><span class=\"line\">| character_set_name | collation_name  |</span><br><span class=\"line\">+--------------------+-----------------+</span><br><span class=\"line\">| utf8               | utf8_general_ci |</span><br><span class=\"line\">+--------------------+-----------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n<h3 id=\"列\"><a href=\"#列\" class=\"headerlink\" title=\"列\"></a>列</h3><h4 id=\"查看方式-3\"><a href=\"#查看方式-3\" class=\"headerlink\" title=\"查看方式\"></a>查看方式</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">mysql&gt;</span><span class=\"bash\"> select column_name, character_set_name, collation_name from information_schema.`columns` c</span></span><br><span class=\"line\">    -&gt; where table_schema = \"simpleweb\"</span><br><span class=\"line\">    -&gt;   and table_name = \"users\";</span><br><span class=\"line\">+-------------+--------------------+-------------------+</span><br><span class=\"line\">| column_name | character_set_name | collation_name    |</span><br><span class=\"line\">+-------------+--------------------+-------------------+</span><br><span class=\"line\">| id          | NULL               | NULL              |</span><br><span class=\"line\">| username    | latin1             | latin1_swedish_ci |</span><br><span class=\"line\">| age         | NULL               | NULL              |</span><br><span class=\"line\">| salary      | NULL               | NULL              |</span><br><span class=\"line\">+-------------+--------------------+-------------------+</span><br><span class=\"line\">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n<h4 id=\"修改方式-3\"><a href=\"#修改方式-3\" class=\"headerlink\" title=\"修改方式\"></a>修改方式</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">mysql&gt;</span><span class=\"bash\">  alter table users modify username varchar(20) character <span class=\"built_in\">set</span> utf8 collate utf8_general_ci;</span></span><br><span class=\"line\">Query OK, 3 rows affected (0.24 sec)</span><br><span class=\"line\">Records: 3  Duplicates: 0  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">mysql&gt;</span><span class=\"bash\"> select column_name, character_set_name, collation_name from information_schema.`columns` c <span class=\"built_in\">where</span> table_schema = <span class=\"string\">\"simpleweb\"</span>   and table_name = <span class=\"string\">\"users\"</span>;</span></span><br><span class=\"line\">+-------------+--------------------+-----------------+</span><br><span class=\"line\">| column_name | character_set_name | collation_name  |</span><br><span class=\"line\">+-------------+--------------------+-----------------+</span><br><span class=\"line\">| id          | NULL               | NULL            |</span><br><span class=\"line\">| username    | utf8               | utf8_general_ci |</span><br><span class=\"line\">| age         | NULL               | NULL            |</span><br><span class=\"line\">| salary      | NULL               | NULL            |</span><br><span class=\"line\">+-------------+--------------------+-----------------+</span><br><span class=\"line\">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n<h3 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h3><ol>\n<li><a href=\"http://stackoverflow.com/questions/1049728/how-do-i-see-what-character-set-a-database-table-column-is-in-mysql\" target=\"_blank\" rel=\"noopener\">how-do-i-see-what-character-set-a-database-table-column-is-in-mysql</a></li>\n<li><a href=\"http://dev.mysql.com/doc/refman/5.7/en/charset-server.html\" target=\"_blank\" rel=\"noopener\">charset-server</a></li>\n<li><a href=\"http://dev.mysql.com/doc/refman/5.7/en/charset-database.html\" target=\"_blank\" rel=\"noopener\">charset-database</a></li>\n<li><a href=\"http://dev.mysql.com/doc/refman/5.7/en/charset-table.html\" target=\"_blank\" rel=\"noopener\">charset-table</a></li>\n<li><a href=\"http://dev.mysql.com/doc/refman/5.7/en/charset-column.html\" target=\"_blank\" rel=\"noopener\">charset-column</a></li>\n<li><a href=\"http://dev.mysql.com/doc/refman/5.7/en/alter-database.html\" target=\"_blank\" rel=\"noopener\">alter-database</a></li>\n<li><a href=\"http://dev.mysql.com/doc/refman/5.7/en/alter-table.html\" target=\"_blank\" rel=\"noopener\">alter-table</a></li>\n<li><a href=\"http://dev.mysql.com/doc/refman/5.7/en/show-variables.html\" target=\"_blank\" rel=\"noopener\">show-variables</a></li>\n</ol>\n"}